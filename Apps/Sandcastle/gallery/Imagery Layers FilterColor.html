<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <meta
      name="description"
      content="Use filter color and show invert color to change the imagery layer color style easily."
    />
    <meta
      name="cesium-sandcastle-labels"
      content="Beginner, Tutorials, Showcases"
    />
    <title>Cesium Demo</title>
    <script type="text/javascript" src="../Sandcastle-header.js"></script>
    <script
      type="text/javascript"
      src="../../../Build/CesiumUnminified/Cesium.js"
      nomodule
    ></script>
    <script type="module" src="../load-cesium-es6.js"></script>
  </head>
  <body
    class="sandcastle-loading"
    data-sandcastle-bucket="bucket-requirejs.html"
  >
    <style>
      @import url(../templates/bucket.css);
      #toolbar {
        background-color: rgba(42, 42, 42, 0.8);
        padding: 4px;
        border-radius: 4px;
      }

      #toolbar .input {
        vertical-align: middle;
        padding-top: 2px;
        padding-bottom: 2px;
      }

      #toolbar .header {
        font-weight: bold;
      }
    </style>
    <div id="cesiumContainer" class="fullSize"></div>
    <div id="loadingOverlay">
      <h1>Loading...</h1>
    </div>
    <div id="toolbar">
      <table>
        <tbody>
          <tr>
            <td class="header">FilterColor</td>
          </tr>
          <tr>
            <td>color</td>
            <td><select data-bind="options:colors, value:color"></select></td>
          </tr>
          <tr>
            <td class="header">InvertColor</td>
          </tr>
          <tr>
            <td>show</td>
            <td><select data-bind="options:shows, value:show"></select></td>
          </tr>
        </tbody>
      </table>
    </div>

    <script id="cesium_sandcastle_script">
      function startup(Cesium) {
        "use strict";
        //Sandcastle_Begin
        const viewer = new Cesium.Viewer("cesiumContainer");

        const baseLayer = viewer.imageryLayers.addImageryProvider(
          new Cesium.ArcGisMapServerImageryProvider({
            url:
              "https://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",
          })
        );

        const viewModel = {
          color: "RED",
          colors: ["WHITE", "RED", "GREEN", "BLUE", "YELLOW"],
          show: "true",
          shows: ["false", "true"],
        };
        baseLayer.filterColor = Cesium.Color.RED;
        baseLayer.showInvertColor = true;

        Cesium.knockout.track(viewModel);

        const toolbar = document.getElementById("toolbar");
        Cesium.knockout.applyBindings(viewModel, toolbar);

        Cesium.knockout
          .getObservable(viewModel, "color")
          .subscribe(function (newValue) {
            baseLayer.filterColor = Cesium.Color[newValue.toUpperCase()];
          });

        Cesium.knockout
          .getObservable(viewModel, "show")
          .subscribe(function (newValue) {
            if (newValue === "true") {
              baseLayer.showInvertColor = true;
            } else {
              baseLayer.showInvertColor = false;
            }
          });

        //Sandcastle_End
        Sandcastle.finishedLoading();
      }
      if (typeof Cesium !== "undefined") {
        window.startupCalled = true;
        startup(Cesium);
      }
    </script>
  </body>
</html>
