# Get the current git values from GitHub Action variables if triggered from pull-reqest or push; otherwise fallback to the current local git branch
BRANCH="$(git branch --show-current)"
BRANCH=${PULL_REQUEST_HEAD_REF:-${GITHUB_REF_NAME:-${BRANCH}}}
COMMIT_SHA="$(git rev-parse HEAD)"
COMMIT_SHA=${PULL_REQUEST_HEAD_SHA:-${GITHUB_SHA:-${COMMIT_SHA}}}

# Read the CesiumJS version from package.json
CESIUM_VERSION=$(npm pkg get version | tr -d '"')

# Build artifact configuration
BUILD_ARTIFACT_BUCKET="cesium-public-builds"
BUILD_ARTIFACT_URL="https://ci-builds.cesium.com/cesium/${BRANCH}"

INDEX_URL="${BUILD_ARTIFACT_URL}/index.html"
ZIP_URL="${BUILD_ARTIFACT_URL}/Cesium-${CESIUM_VERSION}.zip"
NPM_URL="${BUILD_ARTIFACT_URL}/cesium-${CESIUM_VERSION}.tgz"
COVERAGE_URL="${BUILD_ARTIFACT_URL}/Build/Coverage/index.html"