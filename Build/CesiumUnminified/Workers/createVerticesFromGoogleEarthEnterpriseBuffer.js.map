{"version":3,"file":"createVerticesFromGoogleEarthEnterpriseBuffer.js","sources":["../../../../Source/WorkersES6/createVerticesFromGoogleEarthEnterpriseBuffer.js"],"sourcesContent":["import AxisAlignedBoundingBox from \"../Core/AxisAlignedBoundingBox.js\";\r\nimport BoundingSphere from \"../Core/BoundingSphere.js\";\r\nimport Cartesian2 from \"../Core/Cartesian2.js\";\r\nimport Cartesian3 from \"../Core/Cartesian3.js\";\r\nimport Cartographic from \"../Core/Cartographic.js\";\r\nimport defaultValue from \"../Core/defaultValue.js\";\r\nimport defined from \"../Core/defined.js\";\r\nimport Ellipsoid from \"../Core/Ellipsoid.js\";\r\nimport EllipsoidalOccluder from \"../Core/EllipsoidalOccluder.js\";\r\nimport CesiumMath from \"../Core/Math.js\";\r\nimport Matrix4 from \"../Core/Matrix4.js\";\r\nimport OrientedBoundingBox from \"../Core/OrientedBoundingBox.js\";\r\nimport Rectangle from \"../Core/Rectangle.js\";\r\nimport RuntimeError from \"../Core/RuntimeError.js\";\r\nimport TerrainEncoding from \"../Core/TerrainEncoding.js\";\r\nimport Transforms from \"../Core/Transforms.js\";\r\nimport WebMercatorProjection from \"../Core/WebMercatorProjection.js\";\r\nimport createTaskProcessorWorker from \"./createTaskProcessorWorker.js\";\r\n\r\nvar sizeOfUint16 = Uint16Array.BYTES_PER_ELEMENT;\r\nvar sizeOfInt32 = Int32Array.BYTES_PER_ELEMENT;\r\nvar sizeOfUint32 = Uint32Array.BYTES_PER_ELEMENT;\r\nvar sizeOfFloat = Float32Array.BYTES_PER_ELEMENT;\r\nvar sizeOfDouble = Float64Array.BYTES_PER_ELEMENT;\r\n\r\nfunction indexOfEpsilon(arr, elem, elemType) {\r\n  elemType = defaultValue(elemType, CesiumMath);\r\n  var count = arr.length;\r\n  for (var i = 0; i < count; ++i) {\r\n    if (elemType.equalsEpsilon(arr[i], elem, CesiumMath.EPSILON12)) {\r\n      return i;\r\n    }\r\n  }\r\n\r\n  return -1;\r\n}\r\n\r\nfunction createVerticesFromGoogleEarthEnterpriseBuffer(\r\n  parameters,\r\n  transferableObjects\r\n) {\r\n  parameters.ellipsoid = Ellipsoid.clone(parameters.ellipsoid);\r\n  parameters.rectangle = Rectangle.clone(parameters.rectangle);\r\n\r\n  var statistics = processBuffer(\r\n    parameters.buffer,\r\n    parameters.relativeToCenter,\r\n    parameters.ellipsoid,\r\n    parameters.rectangle,\r\n    parameters.nativeRectangle,\r\n    parameters.exaggeration,\r\n    parameters.skirtHeight,\r\n    parameters.includeWebMercatorT,\r\n    parameters.negativeAltitudeExponentBias,\r\n    parameters.negativeElevationThreshold\r\n  );\r\n  var vertices = statistics.vertices;\r\n  transferableObjects.push(vertices.buffer);\r\n  var indices = statistics.indices;\r\n  transferableObjects.push(indices.buffer);\r\n\r\n  return {\r\n    vertices: vertices.buffer,\r\n    indices: indices.buffer,\r\n    numberOfAttributes: statistics.encoding.getStride(),\r\n    minimumHeight: statistics.minimumHeight,\r\n    maximumHeight: statistics.maximumHeight,\r\n    boundingSphere3D: statistics.boundingSphere3D,\r\n    orientedBoundingBox: statistics.orientedBoundingBox,\r\n    occludeePointInScaledSpace: statistics.occludeePointInScaledSpace,\r\n    encoding: statistics.encoding,\r\n    vertexCountWithoutSkirts: statistics.vertexCountWithoutSkirts,\r\n    indexCountWithoutSkirts: statistics.indexCountWithoutSkirts,\r\n    westIndicesSouthToNorth: statistics.westIndicesSouthToNorth,\r\n    southIndicesEastToWest: statistics.southIndicesEastToWest,\r\n    eastIndicesNorthToSouth: statistics.eastIndicesNorthToSouth,\r\n    northIndicesWestToEast: statistics.northIndicesWestToEast,\r\n  };\r\n}\r\n\r\nvar scratchCartographic = new Cartographic();\r\nvar scratchCartesian = new Cartesian3();\r\nvar minimumScratch = new Cartesian3();\r\nvar maximumScratch = new Cartesian3();\r\nvar matrix4Scratch = new Matrix4();\r\n\r\nfunction processBuffer(\r\n  buffer,\r\n  relativeToCenter,\r\n  ellipsoid,\r\n  rectangle,\r\n  nativeRectangle,\r\n  exaggeration,\r\n  skirtHeight,\r\n  includeWebMercatorT,\r\n  negativeAltitudeExponentBias,\r\n  negativeElevationThreshold\r\n) {\r\n  var geographicWest;\r\n  var geographicSouth;\r\n  var geographicEast;\r\n  var geographicNorth;\r\n  var rectangleWidth, rectangleHeight;\r\n\r\n  if (!defined(rectangle)) {\r\n    geographicWest = CesiumMath.toRadians(nativeRectangle.west);\r\n    geographicSouth = CesiumMath.toRadians(nativeRectangle.south);\r\n    geographicEast = CesiumMath.toRadians(nativeRectangle.east);\r\n    geographicNorth = CesiumMath.toRadians(nativeRectangle.north);\r\n    rectangleWidth = CesiumMath.toRadians(rectangle.width);\r\n    rectangleHeight = CesiumMath.toRadians(rectangle.height);\r\n  } else {\r\n    geographicWest = rectangle.west;\r\n    geographicSouth = rectangle.south;\r\n    geographicEast = rectangle.east;\r\n    geographicNorth = rectangle.north;\r\n    rectangleWidth = rectangle.width;\r\n    rectangleHeight = rectangle.height;\r\n  }\r\n\r\n  // Keep track of quad borders so we can remove duplicates around the borders\r\n  var quadBorderLatitudes = [geographicSouth, geographicNorth];\r\n  var quadBorderLongitudes = [geographicWest, geographicEast];\r\n\r\n  var fromENU = Transforms.eastNorthUpToFixedFrame(relativeToCenter, ellipsoid);\r\n  var toENU = Matrix4.inverseTransformation(fromENU, matrix4Scratch);\r\n\r\n  var southMercatorY;\r\n  var oneOverMercatorHeight;\r\n  if (includeWebMercatorT) {\r\n    southMercatorY = WebMercatorProjection.geodeticLatitudeToMercatorAngle(\r\n      geographicSouth\r\n    );\r\n    oneOverMercatorHeight =\r\n      1.0 /\r\n      (WebMercatorProjection.geodeticLatitudeToMercatorAngle(geographicNorth) -\r\n        southMercatorY);\r\n  }\r\n\r\n  var dv = new DataView(buffer);\r\n\r\n  var minHeight = Number.POSITIVE_INFINITY;\r\n  var maxHeight = Number.NEGATIVE_INFINITY;\r\n\r\n  var minimum = minimumScratch;\r\n  minimum.x = Number.POSITIVE_INFINITY;\r\n  minimum.y = Number.POSITIVE_INFINITY;\r\n  minimum.z = Number.POSITIVE_INFINITY;\r\n\r\n  var maximum = maximumScratch;\r\n  maximum.x = Number.NEGATIVE_INFINITY;\r\n  maximum.y = Number.NEGATIVE_INFINITY;\r\n  maximum.z = Number.NEGATIVE_INFINITY;\r\n\r\n  // Compute sizes\r\n  var offset = 0;\r\n  var size = 0;\r\n  var indicesSize = 0;\r\n  var quadSize;\r\n  var quad;\r\n  for (quad = 0; quad < 4; ++quad) {\r\n    var o = offset;\r\n    quadSize = dv.getUint32(o, true);\r\n    o += sizeOfUint32;\r\n\r\n    var x = CesiumMath.toRadians(dv.getFloat64(o, true) * 180.0);\r\n    o += sizeOfDouble;\r\n    if (indexOfEpsilon(quadBorderLongitudes, x) === -1) {\r\n      quadBorderLongitudes.push(x);\r\n    }\r\n\r\n    var y = CesiumMath.toRadians(dv.getFloat64(o, true) * 180.0);\r\n    o += sizeOfDouble;\r\n    if (indexOfEpsilon(quadBorderLatitudes, y) === -1) {\r\n      quadBorderLatitudes.push(y);\r\n    }\r\n\r\n    o += 2 * sizeOfDouble; // stepX + stepY\r\n\r\n    var c = dv.getInt32(o, true); // Read point count\r\n    o += sizeOfInt32;\r\n    size += c;\r\n\r\n    c = dv.getInt32(o, true); // Read index count\r\n    indicesSize += c * 3;\r\n\r\n    offset += quadSize + sizeOfUint32; // Jump to next quad\r\n  }\r\n\r\n  // Quad Border points to remove duplicates\r\n  var quadBorderPoints = [];\r\n  var quadBorderIndices = [];\r\n\r\n  // Create arrays\r\n  var positions = new Array(size);\r\n  var uvs = new Array(size);\r\n  var heights = new Array(size);\r\n  var webMercatorTs = includeWebMercatorT ? new Array(size) : [];\r\n  var indices = new Array(indicesSize);\r\n\r\n  // Points are laid out in rows starting at SW, so storing border points as we\r\n  //  come across them all points will be adjacent.\r\n  var westBorder = [];\r\n  var southBorder = [];\r\n  var eastBorder = [];\r\n  var northBorder = [];\r\n\r\n  // Each tile is split into 4 parts\r\n  var pointOffset = 0;\r\n  var indicesOffset = 0;\r\n  offset = 0;\r\n  for (quad = 0; quad < 4; ++quad) {\r\n    quadSize = dv.getUint32(offset, true);\r\n    offset += sizeOfUint32;\r\n    var startQuad = offset;\r\n\r\n    var originX = CesiumMath.toRadians(dv.getFloat64(offset, true) * 180.0);\r\n    offset += sizeOfDouble;\r\n\r\n    var originY = CesiumMath.toRadians(dv.getFloat64(offset, true) * 180.0);\r\n    offset += sizeOfDouble;\r\n\r\n    var stepX = CesiumMath.toRadians(dv.getFloat64(offset, true) * 180.0);\r\n    var halfStepX = stepX * 0.5;\r\n    offset += sizeOfDouble;\r\n\r\n    var stepY = CesiumMath.toRadians(dv.getFloat64(offset, true) * 180.0);\r\n    var halfStepY = stepY * 0.5;\r\n    offset += sizeOfDouble;\r\n\r\n    var numPoints = dv.getInt32(offset, true);\r\n    offset += sizeOfInt32;\r\n\r\n    var numFaces = dv.getInt32(offset, true);\r\n    offset += sizeOfInt32;\r\n\r\n    //var level = dv.getInt32(offset, true);\r\n    offset += sizeOfInt32;\r\n\r\n    // Keep track of quad indices to overall tile indices\r\n    var indicesMapping = new Array(numPoints);\r\n    for (var i = 0; i < numPoints; ++i) {\r\n      var longitude = originX + dv.getUint8(offset++) * stepX;\r\n      scratchCartographic.longitude = longitude;\r\n      var latitude = originY + dv.getUint8(offset++) * stepY;\r\n      scratchCartographic.latitude = latitude;\r\n\r\n      var height = dv.getFloat32(offset, true);\r\n      offset += sizeOfFloat;\r\n\r\n      // In order to support old clients, negative altitude values are stored as\r\n      // height/-2^32. Old clients see the value as really close to 0 but new clients multiply\r\n      // by -2^32 to get the real negative altitude value.\r\n      if (height !== 0 && height < negativeElevationThreshold) {\r\n        height *= -Math.pow(2, negativeAltitudeExponentBias);\r\n      }\r\n\r\n      // Height is stored in units of (1/EarthRadius) or (1/6371010.0)\r\n      height *= 6371010.0 * exaggeration;\r\n\r\n      scratchCartographic.height = height;\r\n\r\n      // Is it along a quad border - if so check if already exists and use that index\r\n      if (\r\n        indexOfEpsilon(quadBorderLongitudes, longitude) !== -1 ||\r\n        indexOfEpsilon(quadBorderLatitudes, latitude) !== -1\r\n      ) {\r\n        var index = indexOfEpsilon(\r\n          quadBorderPoints,\r\n          scratchCartographic,\r\n          Cartographic\r\n        );\r\n        if (index === -1) {\r\n          quadBorderPoints.push(Cartographic.clone(scratchCartographic));\r\n          quadBorderIndices.push(pointOffset);\r\n        } else {\r\n          indicesMapping[i] = quadBorderIndices[index];\r\n          continue;\r\n        }\r\n      }\r\n      indicesMapping[i] = pointOffset;\r\n\r\n      if (Math.abs(longitude - geographicWest) < halfStepX) {\r\n        westBorder.push({\r\n          index: pointOffset,\r\n          cartographic: Cartographic.clone(scratchCartographic),\r\n        });\r\n      } else if (Math.abs(longitude - geographicEast) < halfStepX) {\r\n        eastBorder.push({\r\n          index: pointOffset,\r\n          cartographic: Cartographic.clone(scratchCartographic),\r\n        });\r\n      } else if (Math.abs(latitude - geographicSouth) < halfStepY) {\r\n        southBorder.push({\r\n          index: pointOffset,\r\n          cartographic: Cartographic.clone(scratchCartographic),\r\n        });\r\n      } else if (Math.abs(latitude - geographicNorth) < halfStepY) {\r\n        northBorder.push({\r\n          index: pointOffset,\r\n          cartographic: Cartographic.clone(scratchCartographic),\r\n        });\r\n      }\r\n\r\n      minHeight = Math.min(height, minHeight);\r\n      maxHeight = Math.max(height, maxHeight);\r\n      heights[pointOffset] = height;\r\n\r\n      var pos = ellipsoid.cartographicToCartesian(scratchCartographic);\r\n      positions[pointOffset] = pos;\r\n\r\n      if (includeWebMercatorT) {\r\n        webMercatorTs[pointOffset] =\r\n          (WebMercatorProjection.geodeticLatitudeToMercatorAngle(latitude) -\r\n            southMercatorY) *\r\n          oneOverMercatorHeight;\r\n      }\r\n\r\n      Matrix4.multiplyByPoint(toENU, pos, scratchCartesian);\r\n\r\n      Cartesian3.minimumByComponent(scratchCartesian, minimum, minimum);\r\n      Cartesian3.maximumByComponent(scratchCartesian, maximum, maximum);\r\n\r\n      var u = (longitude - geographicWest) / (geographicEast - geographicWest);\r\n      u = CesiumMath.clamp(u, 0.0, 1.0);\r\n      var v =\r\n        (latitude - geographicSouth) / (geographicNorth - geographicSouth);\r\n      v = CesiumMath.clamp(v, 0.0, 1.0);\r\n\r\n      uvs[pointOffset] = new Cartesian2(u, v);\r\n      ++pointOffset;\r\n    }\r\n\r\n    var facesElementCount = numFaces * 3;\r\n    for (var j = 0; j < facesElementCount; ++j, ++indicesOffset) {\r\n      indices[indicesOffset] = indicesMapping[dv.getUint16(offset, true)];\r\n      offset += sizeOfUint16;\r\n    }\r\n\r\n    if (quadSize !== offset - startQuad) {\r\n      throw new RuntimeError(\"Invalid terrain tile.\");\r\n    }\r\n  }\r\n\r\n  positions.length = pointOffset;\r\n  uvs.length = pointOffset;\r\n  heights.length = pointOffset;\r\n  if (includeWebMercatorT) {\r\n    webMercatorTs.length = pointOffset;\r\n  }\r\n\r\n  var vertexCountWithoutSkirts = pointOffset;\r\n  var indexCountWithoutSkirts = indicesOffset;\r\n\r\n  // Add skirt points\r\n  var skirtOptions = {\r\n    hMin: minHeight,\r\n    lastBorderPoint: undefined,\r\n    skirtHeight: skirtHeight,\r\n    toENU: toENU,\r\n    ellipsoid: ellipsoid,\r\n    minimum: minimum,\r\n    maximum: maximum,\r\n  };\r\n\r\n  // Sort counter clockwise from NW corner\r\n  // Corner points are in the east/west arrays\r\n  westBorder.sort(function (a, b) {\r\n    return b.cartographic.latitude - a.cartographic.latitude;\r\n  });\r\n  southBorder.sort(function (a, b) {\r\n    return a.cartographic.longitude - b.cartographic.longitude;\r\n  });\r\n  eastBorder.sort(function (a, b) {\r\n    return a.cartographic.latitude - b.cartographic.latitude;\r\n  });\r\n  northBorder.sort(function (a, b) {\r\n    return b.cartographic.longitude - a.cartographic.longitude;\r\n  });\r\n\r\n  var percentage = 0.00001;\r\n  addSkirt(\r\n    positions,\r\n    heights,\r\n    uvs,\r\n    webMercatorTs,\r\n    indices,\r\n    skirtOptions,\r\n    westBorder,\r\n    -percentage * rectangleWidth,\r\n    true,\r\n    -percentage * rectangleHeight\r\n  );\r\n  addSkirt(\r\n    positions,\r\n    heights,\r\n    uvs,\r\n    webMercatorTs,\r\n    indices,\r\n    skirtOptions,\r\n    southBorder,\r\n    -percentage * rectangleHeight,\r\n    false\r\n  );\r\n  addSkirt(\r\n    positions,\r\n    heights,\r\n    uvs,\r\n    webMercatorTs,\r\n    indices,\r\n    skirtOptions,\r\n    eastBorder,\r\n    percentage * rectangleWidth,\r\n    true,\r\n    percentage * rectangleHeight\r\n  );\r\n  addSkirt(\r\n    positions,\r\n    heights,\r\n    uvs,\r\n    webMercatorTs,\r\n    indices,\r\n    skirtOptions,\r\n    northBorder,\r\n    percentage * rectangleHeight,\r\n    false\r\n  );\r\n\r\n  // Since the corner between the north and west sides is in the west array, generate the last\r\n  //  two triangles between the last north vertex and the first west vertex\r\n  if (westBorder.length > 0 && northBorder.length > 0) {\r\n    var firstBorderIndex = westBorder[0].index;\r\n    var firstSkirtIndex = vertexCountWithoutSkirts;\r\n    var lastBorderIndex = northBorder[northBorder.length - 1].index;\r\n    var lastSkirtIndex = positions.length - 1;\r\n\r\n    indices.push(\r\n      lastBorderIndex,\r\n      lastSkirtIndex,\r\n      firstSkirtIndex,\r\n      firstSkirtIndex,\r\n      firstBorderIndex,\r\n      lastBorderIndex\r\n    );\r\n  }\r\n\r\n  size = positions.length; // Get new size with skirt vertices\r\n\r\n  var boundingSphere3D = BoundingSphere.fromPoints(positions);\r\n  var orientedBoundingBox;\r\n  if (defined(rectangle)) {\r\n    orientedBoundingBox = OrientedBoundingBox.fromRectangle(\r\n      rectangle,\r\n      minHeight,\r\n      maxHeight,\r\n      ellipsoid\r\n    );\r\n  }\r\n\r\n  var occluder = new EllipsoidalOccluder(ellipsoid);\r\n  var occludeePointInScaledSpace = occluder.computeHorizonCullingPointPossiblyUnderEllipsoid(\r\n    relativeToCenter,\r\n    positions,\r\n    minHeight\r\n  );\r\n\r\n  var aaBox = new AxisAlignedBoundingBox(minimum, maximum, relativeToCenter);\r\n  var encoding = new TerrainEncoding(\r\n    aaBox,\r\n    skirtOptions.hMin,\r\n    maxHeight,\r\n    fromENU,\r\n    false,\r\n    includeWebMercatorT\r\n  );\r\n  var vertices = new Float32Array(size * encoding.getStride());\r\n\r\n  var bufferIndex = 0;\r\n  for (var k = 0; k < size; ++k) {\r\n    bufferIndex = encoding.encode(\r\n      vertices,\r\n      bufferIndex,\r\n      positions[k],\r\n      uvs[k],\r\n      heights[k],\r\n      undefined,\r\n      webMercatorTs[k]\r\n    );\r\n  }\r\n\r\n  var westIndicesSouthToNorth = westBorder\r\n    .map(function (vertex) {\r\n      return vertex.index;\r\n    })\r\n    .reverse();\r\n  var southIndicesEastToWest = southBorder\r\n    .map(function (vertex) {\r\n      return vertex.index;\r\n    })\r\n    .reverse();\r\n  var eastIndicesNorthToSouth = eastBorder\r\n    .map(function (vertex) {\r\n      return vertex.index;\r\n    })\r\n    .reverse();\r\n  var northIndicesWestToEast = northBorder\r\n    .map(function (vertex) {\r\n      return vertex.index;\r\n    })\r\n    .reverse();\r\n\r\n  southIndicesEastToWest.unshift(\r\n    eastIndicesNorthToSouth[eastIndicesNorthToSouth.length - 1]\r\n  );\r\n  southIndicesEastToWest.push(westIndicesSouthToNorth[0]);\r\n\r\n  northIndicesWestToEast.unshift(\r\n    westIndicesSouthToNorth[westIndicesSouthToNorth.length - 1]\r\n  );\r\n  northIndicesWestToEast.push(eastIndicesNorthToSouth[0]);\r\n\r\n  return {\r\n    vertices: vertices,\r\n    indices: new Uint16Array(indices),\r\n    maximumHeight: maxHeight,\r\n    minimumHeight: minHeight,\r\n    encoding: encoding,\r\n    boundingSphere3D: boundingSphere3D,\r\n    orientedBoundingBox: orientedBoundingBox,\r\n    occludeePointInScaledSpace: occludeePointInScaledSpace,\r\n    vertexCountWithoutSkirts: vertexCountWithoutSkirts,\r\n    indexCountWithoutSkirts: indexCountWithoutSkirts,\r\n    westIndicesSouthToNorth: westIndicesSouthToNorth,\r\n    southIndicesEastToWest: southIndicesEastToWest,\r\n    eastIndicesNorthToSouth: eastIndicesNorthToSouth,\r\n    northIndicesWestToEast: northIndicesWestToEast,\r\n  };\r\n}\r\n\r\nfunction addSkirt(\r\n  positions,\r\n  heights,\r\n  uvs,\r\n  webMercatorTs,\r\n  indices,\r\n  skirtOptions,\r\n  borderPoints,\r\n  fudgeFactor,\r\n  eastOrWest,\r\n  cornerFudge\r\n) {\r\n  var count = borderPoints.length;\r\n  for (var j = 0; j < count; ++j) {\r\n    var borderPoint = borderPoints[j];\r\n    var borderCartographic = borderPoint.cartographic;\r\n    var borderIndex = borderPoint.index;\r\n    var currentIndex = positions.length;\r\n\r\n    var longitude = borderCartographic.longitude;\r\n    var latitude = borderCartographic.latitude;\r\n    latitude = CesiumMath.clamp(\r\n      latitude,\r\n      -CesiumMath.PI_OVER_TWO,\r\n      CesiumMath.PI_OVER_TWO\r\n    ); // Don't go over the poles\r\n    var height = borderCartographic.height - skirtOptions.skirtHeight;\r\n    skirtOptions.hMin = Math.min(skirtOptions.hMin, height);\r\n\r\n    Cartographic.fromRadians(longitude, latitude, height, scratchCartographic);\r\n\r\n    // Adjust sides to angle out\r\n    if (eastOrWest) {\r\n      scratchCartographic.longitude += fudgeFactor;\r\n    }\r\n\r\n    // Adjust top or bottom to angle out\r\n    // Since corners are in the east/west arrays angle the first and last points as well\r\n    if (!eastOrWest) {\r\n      scratchCartographic.latitude += fudgeFactor;\r\n    } else if (j === count - 1) {\r\n      scratchCartographic.latitude += cornerFudge;\r\n    } else if (j === 0) {\r\n      scratchCartographic.latitude -= cornerFudge;\r\n    }\r\n\r\n    var pos = skirtOptions.ellipsoid.cartographicToCartesian(\r\n      scratchCartographic\r\n    );\r\n    positions.push(pos);\r\n    heights.push(height);\r\n    uvs.push(Cartesian2.clone(uvs[borderIndex])); // Copy UVs from border point\r\n    if (webMercatorTs.length > 0) {\r\n      webMercatorTs.push(webMercatorTs[borderIndex]);\r\n    }\r\n\r\n    Matrix4.multiplyByPoint(skirtOptions.toENU, pos, scratchCartesian);\r\n\r\n    var minimum = skirtOptions.minimum;\r\n    var maximum = skirtOptions.maximum;\r\n    Cartesian3.minimumByComponent(scratchCartesian, minimum, minimum);\r\n    Cartesian3.maximumByComponent(scratchCartesian, maximum, maximum);\r\n\r\n    var lastBorderPoint = skirtOptions.lastBorderPoint;\r\n    if (defined(lastBorderPoint)) {\r\n      var lastBorderIndex = lastBorderPoint.index;\r\n      indices.push(\r\n        lastBorderIndex,\r\n        currentIndex - 1,\r\n        currentIndex,\r\n        currentIndex,\r\n        borderIndex,\r\n        lastBorderIndex\r\n      );\r\n    }\r\n\r\n    skirtOptions.lastBorderPoint = borderPoint;\r\n  }\r\n}\r\nexport default createTaskProcessorWorker(\r\n  createVerticesFromGoogleEarthEnterpriseBuffer\r\n);\r\n"],"names":["defaultValue","CesiumMath","Ellipsoid","Rectangle","Cartographic","Cartesian3","Matrix4","defined","Transforms","WebMercatorProjection","Cartesian2","RuntimeError","BoundingSphere","OrientedBoundingBox","EllipsoidalOccluder","AxisAlignedBoundingBox","TerrainEncoding"],"mappings":"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"}