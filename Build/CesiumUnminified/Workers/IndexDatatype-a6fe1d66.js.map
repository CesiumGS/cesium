{"version":3,"file":"IndexDatatype-a6fe1d66.js","sources":["../../../../Source/Core/IndexDatatype.js"],"sourcesContent":["import defined from \"./defined.js\";\r\nimport DeveloperError from \"./DeveloperError.js\";\r\nimport CesiumMath from \"./Math.js\";\r\nimport WebGLConstants from \"./WebGLConstants.js\";\r\n\r\n/**\r\n * Constants for WebGL index datatypes.  These corresponds to the\r\n * <code>type</code> parameter of {@link http://www.khronos.org/opengles/sdk/docs/man/xhtml/glDrawElements.xml|drawElements}.\r\n *\r\n * @enum {Number}\r\n */\r\nvar IndexDatatype = {\r\n  /**\r\n   * 8-bit unsigned byte corresponding to <code>UNSIGNED_BYTE</code> and the type\r\n   * of an element in <code>Uint8Array</code>.\r\n   *\r\n   * @type {Number}\r\n   * @constant\r\n   */\r\n  UNSIGNED_BYTE: WebGLConstants.UNSIGNED_BYTE,\r\n\r\n  /**\r\n   * 16-bit unsigned short corresponding to <code>UNSIGNED_SHORT</code> and the type\r\n   * of an element in <code>Uint16Array</code>.\r\n   *\r\n   * @type {Number}\r\n   * @constant\r\n   */\r\n  UNSIGNED_SHORT: WebGLConstants.UNSIGNED_SHORT,\r\n\r\n  /**\r\n   * 32-bit unsigned int corresponding to <code>UNSIGNED_INT</code> and the type\r\n   * of an element in <code>Uint32Array</code>.\r\n   *\r\n   * @type {Number}\r\n   * @constant\r\n   */\r\n  UNSIGNED_INT: WebGLConstants.UNSIGNED_INT,\r\n};\r\n\r\n/**\r\n * Returns the size, in bytes, of the corresponding datatype.\r\n *\r\n * @param {IndexDatatype} indexDatatype The index datatype to get the size of.\r\n * @returns {Number} The size in bytes.\r\n *\r\n * @example\r\n * // Returns 2\r\n * var size = Cesium.IndexDatatype.getSizeInBytes(Cesium.IndexDatatype.UNSIGNED_SHORT);\r\n */\r\nIndexDatatype.getSizeInBytes = function (indexDatatype) {\r\n  switch (indexDatatype) {\r\n    case IndexDatatype.UNSIGNED_BYTE:\r\n      return Uint8Array.BYTES_PER_ELEMENT;\r\n    case IndexDatatype.UNSIGNED_SHORT:\r\n      return Uint16Array.BYTES_PER_ELEMENT;\r\n    case IndexDatatype.UNSIGNED_INT:\r\n      return Uint32Array.BYTES_PER_ELEMENT;\r\n  }\r\n\r\n  //>>includeStart('debug', pragmas.debug);\r\n  throw new DeveloperError(\r\n    \"indexDatatype is required and must be a valid IndexDatatype constant.\"\r\n  );\r\n  //>>includeEnd('debug');\r\n};\r\n\r\n/**\r\n * Gets the datatype with a given size in bytes.\r\n *\r\n * @param {Number} sizeInBytes The size of a single index in bytes.\r\n * @returns {IndexDatatype} The index datatype with the given size.\r\n */\r\nIndexDatatype.fromSizeInBytes = function (sizeInBytes) {\r\n  switch (sizeInBytes) {\r\n    case 2:\r\n      return IndexDatatype.UNSIGNED_SHORT;\r\n    case 4:\r\n      return IndexDatatype.UNSIGNED_INT;\r\n    case 1:\r\n      return IndexDatatype.UNSIGNED_BYTE;\r\n    //>>includeStart('debug', pragmas.debug);\r\n    default:\r\n      throw new DeveloperError(\r\n        \"Size in bytes cannot be mapped to an IndexDatatype\"\r\n      );\r\n    //>>includeEnd('debug');\r\n  }\r\n};\r\n\r\n/**\r\n * Validates that the provided index datatype is a valid {@link IndexDatatype}.\r\n *\r\n * @param {IndexDatatype} indexDatatype The index datatype to validate.\r\n * @returns {Boolean} <code>true</code> if the provided index datatype is a valid value; otherwise, <code>false</code>.\r\n *\r\n * @example\r\n * if (!Cesium.IndexDatatype.validate(indexDatatype)) {\r\n *   throw new Cesium.DeveloperError('indexDatatype must be a valid value.');\r\n * }\r\n */\r\nIndexDatatype.validate = function (indexDatatype) {\r\n  return (\r\n    defined(indexDatatype) &&\r\n    (indexDatatype === IndexDatatype.UNSIGNED_BYTE ||\r\n      indexDatatype === IndexDatatype.UNSIGNED_SHORT ||\r\n      indexDatatype === IndexDatatype.UNSIGNED_INT)\r\n  );\r\n};\r\n\r\n/**\r\n * Creates a typed array that will store indices, using either <code><Uint16Array</code>\r\n * or <code>Uint32Array</code> depending on the number of vertices.\r\n *\r\n * @param {Number} numberOfVertices Number of vertices that the indices will reference.\r\n * @param {Number|Array} indicesLengthOrArray Passed through to the typed array constructor.\r\n * @returns {Uint16Array|Uint32Array} A <code>Uint16Array</code> or <code>Uint32Array</code> constructed with <code>indicesLengthOrArray</code>.\r\n *\r\n * @example\r\n * this.indices = Cesium.IndexDatatype.createTypedArray(positions.length / 3, numberOfIndices);\r\n */\r\nIndexDatatype.createTypedArray = function (\r\n  numberOfVertices,\r\n  indicesLengthOrArray\r\n) {\r\n  //>>includeStart('debug', pragmas.debug);\r\n  if (!defined(numberOfVertices)) {\r\n    throw new DeveloperError(\"numberOfVertices is required.\");\r\n  }\r\n  //>>includeEnd('debug');\r\n\r\n  if (numberOfVertices >= CesiumMath.SIXTY_FOUR_KILOBYTES) {\r\n    return new Uint32Array(indicesLengthOrArray);\r\n  }\r\n\r\n  return new Uint16Array(indicesLengthOrArray);\r\n};\r\n\r\n/**\r\n * Creates a typed array from a source array buffer.  The resulting typed array will store indices, using either <code><Uint16Array</code>\r\n * or <code>Uint32Array</code> depending on the number of vertices.\r\n *\r\n * @param {Number} numberOfVertices Number of vertices that the indices will reference.\r\n * @param {ArrayBuffer} sourceArray Passed through to the typed array constructor.\r\n * @param {Number} byteOffset Passed through to the typed array constructor.\r\n * @param {Number} length Passed through to the typed array constructor.\r\n * @returns {Uint16Array|Uint32Array} A <code>Uint16Array</code> or <code>Uint32Array</code> constructed with <code>sourceArray</code>, <code>byteOffset</code>, and <code>length</code>.\r\n *\r\n */\r\nIndexDatatype.createTypedArrayFromArrayBuffer = function (\r\n  numberOfVertices,\r\n  sourceArray,\r\n  byteOffset,\r\n  length\r\n) {\r\n  //>>includeStart('debug', pragmas.debug);\r\n  if (!defined(numberOfVertices)) {\r\n    throw new DeveloperError(\"numberOfVertices is required.\");\r\n  }\r\n  if (!defined(sourceArray)) {\r\n    throw new DeveloperError(\"sourceArray is required.\");\r\n  }\r\n  if (!defined(byteOffset)) {\r\n    throw new DeveloperError(\"byteOffset is required.\");\r\n  }\r\n  //>>includeEnd('debug');\r\n\r\n  if (numberOfVertices >= CesiumMath.SIXTY_FOUR_KILOBYTES) {\r\n    return new Uint32Array(sourceArray, byteOffset, length);\r\n  }\r\n\r\n  return new Uint16Array(sourceArray, byteOffset, length);\r\n};\r\nexport default Object.freeze(IndexDatatype);\r\n"],"names":["WebGLConstants","DeveloperError","defined","CesiumMath"],"mappings":"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"}